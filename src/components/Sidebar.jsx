import { Link, useLocation } from 'react-router-dom';

// --- Icon Components defined directly in the file ---

const HomeIcon = (props) => (
  <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
    <path d="M1.58691 8.75L10.4406 1.93944C10.7138 1.72935 10.8503 1.62431 10.9963 1.57141C11.2164 1.49171 11.4574 1.49171 11.6775 1.57141C11.8235 1.62431 11.9601 1.72935 12.2332 1.93944L21.0869 8.75M19.5869 7.59615V16.34C19.5869 17.6534 19.5869 18.3101 19.3848 18.8325C19.08 19.6203 18.4572 20.2432 17.6693 20.548C17.147 20.75 16.4903 20.75 15.1769 20.75H14.3369M3.08691 7.59615V16.34C3.08691 17.6534 3.08691 18.3101 3.289 18.8325C3.59379 19.6203 4.21663 20.2432 5.00448 20.548C5.52683 20.75 6.18353 20.75 7.49691 20.75H8.33691M8.33691 20.75V13.97C8.33691 13.5322 8.33691 13.3133 8.40428 13.1392C8.50587 12.8766 8.71349 12.669 8.9761 12.5674C9.15022 12.5 9.36912 12.5 9.80691 12.5H12.8669C13.3047 12.5 13.5236 12.5 13.6977 12.5674C13.9603 12.669 14.168 12.8766 14.2696 13.1392C14.3369 13.3133 14.3369 13.5322 14.3369 13.97V20.75M8.33691 20.75H14.3369"
      stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" />
  </svg>
);

const ProjectsIcon = (props) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
    <path d="M20 17L20 9C20 7.89543 19.1046 7 18 7L12.5 7C11.9477 7 11.5 6.55228 11.5 6L11.5 5C11.5 3.89543 10.6046 3 9.5 3L6 3C4.89543 3 4 3.89543 4 5L4 17C4 18.1046 4.89543 19 6 19L18 19C19.1046 19 20 18.1046 20 17Z"
      stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
  </svg>
);

const TemplatesIcon = (props) => (
  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
    <rect x="3" y="3" width="8" height="8" rx="1" stroke="currentColor" strokeWidth="1.5" />
    <rect x="3" y="13" width="8" height="8" rx="1" stroke="currentColor" strokeWidth="1.5" />
    <rect x="13" y="3" width="8" height="8" rx="1" stroke="currentColor" strokeWidth="1.5" />
    <rect x="13" y="13" width="8" height="8" rx="1" stroke="currentColor" strokeWidth="1.5" />
  </svg>
);

const UploadsIcon = (props) => (
  <svg width="25" height="20" viewBox="0 0 25 20" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
    <path d="M11.8633 7.66797C12.1579 7.42766 12.5926 7.44512 12.8672 7.71973L15.8672 10.7197C16.1601 11.0126 16.1601 11.4874 15.8672 11.7803C15.5743 12.0732 15.0995 12.0732 14.8066 11.7803L13.0869 10.0605V18.75C13.0869 19.1642 12.7511 19.5 12.3369 19.5C11.9227 19.5 11.5869 19.1642 11.5869 18.75V10.0605L9.86719 11.7803C9.57429 12.0732 9.09953 12.0732 8.80664 11.7803C8.51375 11.4874 8.51375 11.0126 8.80664 10.7197L11.8066 7.71973L11.8633 7.66797ZM12.6523 0C16.0597 0 18.8364 2.67962 19.0684 6.01953C22.0166 6.25154 24.3369 8.71579 24.3369 11.7236V12C24.3369 15.3137 21.6506 18 18.3369 18H17.5869C17.1727 18 16.8369 17.6642 16.8369 17.25C16.8369 16.8358 17.1727 16.5 17.5869 16.5H18.3369C20.8222 16.5 22.8369 14.4853 22.8369 12V11.7236C22.8369 9.391 20.9459 7.50003 18.6133 7.5C18.04 7.5 17.5869 7.03204 17.5869 6.47168C17.5868 3.74022 15.3709 1.5 12.6523 1.5H12.0215C9.30288 1.5 7.08701 3.74022 7.08691 6.47168C7.08691 7.03204 6.63379 7.5 6.06055 7.5C3.72791 7.50003 1.83694 9.391 1.83691 11.7236V12C1.83691 14.4853 3.85163 16.5 6.33691 16.5H7.08691C7.50113 16.5 7.83691 16.8358 7.83691 17.25C7.83691 17.6642 7.50113 18 7.08691 18H6.33691C3.02321 18 0.336914 15.3137 0.336914 12V11.7236C0.336941 8.71612 2.65671 6.252 5.60449 6.01953C5.83646 2.67959 8.61412 0 12.0215 0H12.6523Z"
      fill="currentColor" />
  </svg>
);

const MoreIcon = (props) => (
  <svg width="16" height="4" viewBox="0 0 16 4" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
    <path d="M2.33691 3.5C3.16534 3.5 3.83691 2.82843 3.83691 2C3.83691 1.17157 3.16534 0.5 2.33691 0.5C1.50849 0.5 0.836914 1.17157 0.836914 2C0.836914 2.82843 1.50849 3.5 2.33691 3.5Z" fill="currentColor"/>
    <path d="M8.33691 3.5C9.16534 3.5 9.83691 2.82843 9.83691 2C9.83691 1.17157 9.16534 0.5 8.33691 0.5C7.50849 0.5 6.83691 1.17157 6.83691 2C6.83691 2.82843 7.50849 3.5 8.33691 3.5Z" fill="currentColor"/>
    <path d="M14.3369 3.5C15.1653 3.5 15.8369 2.82843 15.8369 2C15.8369 1.17157 15.1653 0.5 14.3369 0.5C13.5085 0.5 12.8369 1.17157 12.8369 2C12.8369 2.82843 13.5085 3.5 14.3369 3.5Z" fill="currentColor"/>
  </svg>
);

const HelpIcon = (props) => (
  <svg width="17" height="20" viewBox="0 0 17 20" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
    <path d="M8.33691 0.5C13.1659 0.5 16.5869 4.62674 16.5869 8.75C16.5869 10.7645 16.0785 12.6392 14.8066 14.4199C13.5469 16.1836 11.5686 17.8122 8.70117 19.4053C8.469 19.5343 8.186 19.531 7.95703 19.3965C7.728 19.2617 7.58691 19.0157 7.58691 18.75V16.3369C3.73964 15.9652 0.0869141 12.7429 0.0869141 8.75C0.0869243 4.62674 3.50789 0.5 8.33691 0.5ZM8.33691 2C4.41595 2 1.58692 5.37323 1.58691 8.75C1.58691 11.8246 4.51163 14.559 7.7793 14.8496C8.46805 14.9109 9.0869 15.4757 9.08691 16.25V17.4434C11.2182 16.1365 12.6557 14.851 13.5859 13.5488C14.6577 12.0484 15.0869 10.4854 15.0869 8.75C15.0869 5.37323 12.2579 2 8.33691 2ZM8.33691 11.875C8.85464 11.875 9.27441 12.2948 9.27441 12.8125C9.27435 13.3302 8.8546 13.75 8.33691 13.75C7.81923 13.75 7.39948 13.3302 7.39941 12.8125C7.39941 12.2948 7.81919 11.875 8.33691 11.875ZM9.27441 3.625C10.8967 3.62505 12.2119 4.94019 12.2119 6.5625C12.2119 8.18481 10.8967 9.49995 9.27441 9.5H9.08691V10.625C9.08691 11.0392 8.75109 11.375 8.33691 11.375C7.92274 11.375 7.58691 11.0392 7.58691 10.625V9.0625C7.58691 8.47573 8.06265 8.00005 8.64941 8H9.27441C10.0683 7.99995 10.7119 7.35638 10.7119 6.5625C10.7119 5.76862 10.0683 5.12505 9.27441 5.125H7.78906C6.96808 5.12506 6.36535 5.89688 6.56445 6.69336C6.66474 7.0951 6.42027 7.50206 6.01855 7.60254C5.61682 7.70279 5.20982 7.45837 5.10938 7.05664C4.67376 5.31352 5.99231 3.62506 7.78906 3.625H9.27441Z" 
      fill="currentColor" />
  </svg>
);

const SettingsIcon = (props) => (
  <svg width="19" height="18" viewBox="0 0 19 18" fill="none" xmlns="http://www.w3.org/2000/svg" {...props}>
    <path d="M12.4619 9C12.4619 10.7259 11.0628 12.125 9.33691 12.125C7.61102 12.125 6.21191 10.7259 6.21191 9C6.21191 7.27411 7.61102 5.875 9.33691 5.875C11.0628 5.875 12.4619 7.27411 12.4619 9Z" stroke="currentColor" strokeWidth="1.5"/>
    <path d="M11.0687 17.125H7.60508C7.52184 17.125 7.45016 17.0662 7.43384 16.9846C7.1011 15.3209 5.50817 14.2215 3.83461 14.5004L3.2279 14.6015C3.14283 14.6157 3.05775 14.5764 3.01338 14.5024L1.2889 11.6283C1.24481 11.5548 1.26184 11.4601 1.32876 11.4065C2.87094 10.1728 2.87094 7.82722 1.32876 6.59348C1.26184 6.53994 1.24481 6.44518 1.2889 6.37169L3.01338 3.49756C3.05775 3.42361 3.14283 3.38432 3.2279 3.3985L3.83461 3.49962C5.50817 3.77854 7.1011 2.67908 7.43384 1.01539C7.45016 0.933759 7.52184 0.875 7.60508 0.875H11.0687C11.152 0.875 11.2237 0.933759 11.24 1.01539C11.5727 2.67909 13.1657 3.77854 14.8392 3.49962L15.4459 3.3985C15.531 3.38432 15.6161 3.42361 15.6605 3.49756L17.3849 6.37169C17.429 6.44518 17.412 6.53994 17.3451 6.59348C15.8029 7.82722 15.8029 10.1728 17.3451 11.4065C17.412 11.4601 17.429 11.5548 17.3849 11.6283L15.6605 14.5024C15.6161 14.5764 15.531 14.6157 15.4459 14.6015L14.8392 14.5004C13.1657 14.2215 11.5727 15.3209 11.24 16.9846C11.2237 17.0662 11.152 17.125 11.0687 17.125Z" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
  </svg>
);

// --- Navigation and Utility Item Arrays ---

const navItems = [
  { label: 'Home', path: '/home', Icon: HomeIcon },
  { label: 'Projects', path: '/projects', Icon: ProjectsIcon },
  { label: 'Templates', path: '/templates', Icon: TemplatesIcon },
  { label: 'Uploads', path: '/uploads', Icon: UploadsIcon },
  { label: 'More', path: '/more', Icon: MoreIcon },
];

const utilityItems = [
  { label: 'Help', path: '/help', Icon: HelpIcon },
  { label: 'Settings', path: '/settings', Icon: SettingsIcon },
];

// --- Main Sidebar Component ---

const Sidebar = () => {
  const location = useLocation();

  return (
    <aside className="sidebar">
      {/* Main Navigation Section */}
      <nav className="sidebar-nav">
        <ul>
          {navItems.map(({ label, path, Icon }) => (
            <li key={label}>
              <Link
                to={path}
                className={`nav-item ${location.pathname === path ? 'active' : ''}`}
              >
                <div className="nav-icon-wrapper">
                  <Icon className="nav-icon" />
                </div>
                <span className="nav-label">{label}</span>
              </Link>
            </li>
          ))}
        </ul>
      </nav>

      {/* Bottom Utility Section */}
      <div className="sidebar-bottom">
        <nav className="utility-nav">
          <ul>
            {utilityItems.map(({ label, path, Icon }) => (
              <li key={label}>
                <Link
                  to={path}
                  className={`nav-item ${location.pathname === path ? 'active' : ''}`}
                >
                  <div className="nav-icon-wrapper">
                    <Icon className="nav-icon" />
                  </div>
                </Link>
              </li>
            ))}
          </ul>
        </nav>

        {/* User Profile */}
        <div className="sidebar-profile">
          <div className="profile-avatar">
            <img 
              src="./public/profile.jpg" 
              alt="User Avatar" 
              className="avatar-img"
            />
          </div>
        </div>
      </div>
    </aside>
  );
};

export default Sidebar;